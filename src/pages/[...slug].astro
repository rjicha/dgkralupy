---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';

export async function getStaticPaths() {
  const pages = await getCollection('pages', ({ data }) => {
    return data.draft !== true;
  });

  return pages.map((page) => ({
    params: { slug: page.slug },
    props: { page },
  }));
}

const { page } = Astro.props;
const { Content } = await page.render();
---

<BaseLayout
  title={`${page.data.title} | Dvořákovo gymnázium Kralupy nad Vltavou`}
  description={page.data.description || page.data.title}
>
  <div class="container mx-auto px-4 py-8">
    <article class="max-w-4xl mx-auto">
      <!-- Breadcrumb -->
      <nav class="text-sm text-text-muted mb-6">
        <ol class="flex items-center gap-2">
          <li><a href={import.meta.env.BASE_URL + "/"} class="hover:text-accent-rose">Úvod</a></li>
          {page.data.section && (
            <>
              <li>/</li>
              <li class="capitalize">{page.data.section.replace('-', ' ')}</li>
            </>
          )}
          <li>/</li>
          <li class="text-text-primary">{page.data.title}</li>
        </ol>
      </nav>

      <!-- Page Header -->
      <header class="mb-8">
        <h1 class="text-4xl md:text-5xl font-heading font-thin uppercase text-text-primary border-b-2 border-accent-coral pb-4">
          {page.data.title}
        </h1>
      </header>

      <!-- Page Content -->
      <div class="prose max-w-none">
        <Content />
      </div>
    </article>
  </div>
</BaseLayout>
